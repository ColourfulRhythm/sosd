"use strict";(self.webpackChunkadparlay_lead_capture=self.webpackChunkadparlay_lead_capture||[]).push([[360],{6360:(n,e,t)=>{t.d(e,{emailService:()=>i});var o=t(808);const i=new class{constructor(){this.baseUrl=void 0,this.baseUrl={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"https://us-central1-adparlaysaas.cloudfunctions.net/api"}async sendLeadNotification(n,e,t){try{const o="New lead from ".concat(e.formTitle," - click to view details"),i={to:n,subject:o,html:this.generateLeadEmailHTML(e,t),formId:e.formId,formTitle:e.formTitle,submissionId:e.id},a=await fetch("".concat(this.baseUrl,"/notifications/email"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!a.ok)throw new Error("Email notification failed: ".concat(a.statusText));const r=await a.json();console.log("Email notification sent successfully:",r)}catch(o){throw console.error("Error sending email notification:",o),o}}generateLeadEmailHTML(n,e){const t=Object.entries(n.formData).map(n=>{let[t,o]=n;const i=(n=>{if(!e.blocks)return n;for(const o of e.blocks){var t;const e=null===(t=o.questions)||void 0===t?void 0:t.find(e=>e.id===n);if(e)return e.label}return n})(t),a=(n=>"object"===typeof n&&null!==n?n.isFile?"\ud83d\udcce ".concat(n.fileName," (").concat(n.fileType,")"):JSON.stringify(n):String(n))(o);return'\n          <tr>\n            <td style="padding: 8px; border-bottom: 1px solid #eee; font-weight: 600; color: #374151;">\n              '.concat(i,'\n            </td>\n            <td style="padding: 8px; border-bottom: 1px solid #eee; color: #6b7280;">\n              ').concat(a,"\n            </td>\n          </tr>\n        ")}).join("");return'\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset="utf-8">\n          <meta name="viewport" content="width=device-width, initial-scale=1.0">\n          <title>New Lead Notification</title>\n        </head>\n        <body style="font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif; line-height: 1.6; color: #374151; max-width: 600px; margin: 0 auto; padding: 20px;">\n          <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 12px; margin-bottom: 20px;">\n            <h1 style="color: white; margin: 0; font-size: 24px; font-weight: 600;">\n              \ud83c\udf89 New Lead Received!\n            </h1>\n            <p style="color: rgba(255, 255, 255, 0.9); margin: 8px 0 0 0; font-size: 16px;">\n              You have a new lead from your form: <strong>'.concat(n.formTitle,'</strong>\n            </p>\n          </div>\n\n          <div style="background: #f9fafb; padding: 20px; border-radius: 8px; margin-bottom: 20px;">\n            <h2 style="color: #374151; margin: 0 0 16px 0; font-size: 18px; font-weight: 600;">\n              Lead Details\n            </h2>\n            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; font-size: 14px;">\n              <div>\n                <strong style="color: #374151;">Form:</strong><br>\n                <span style="color: #6b7280;">').concat(n.formTitle,'</span>\n              </div>\n              <div>\n                <strong style="color: #374151;">Submitted:</strong><br>\n                <span style="color: #6b7280;">').concat(n.submittedAt.toLocaleDateString()," at ").concat(n.submittedAt.toLocaleTimeString(),'</span>\n              </div>\n            </div>\n          </div>\n\n          <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; overflow: hidden;">\n            <h3 style="background: #f3f4f6; margin: 0; padding: 16px; font-size: 16px; font-weight: 600; color: #374151;">\n              Form Responses\n            </h3>\n            <table style="width: 100%; border-collapse: collapse;">\n              <thead>\n                <tr style="background: #f9fafb;">\n                  <th style="padding: 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb;">\n                    Question\n                  </th>\n                  <th style="padding: 12px; text-align: left; font-weight: 600; color: #374151; border-bottom: 1px solid #e5e7eb;">\n                    Answer\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                ').concat(t,'\n              </tbody>\n            </table>\n          </div>\n\n          <div style="text-align: center; margin-top: 30px; padding: 20px; background: #f0f9ff; border-radius: 8px;">\n            <p style="margin: 0 0 16px 0; color: #1e40af; font-weight: 600;">\n              View this lead in your dashboard\n            </p>\n            <a href="').concat((0,o.$)(),'/responses" \n               style="display: inline-block; background: #3b82f6; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: 600; transition: background-color 0.2s;">\n              View All Leads\n            </a>\n          </div>\n\n          <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e5e7eb; text-align: center; color: #9ca3af; font-size: 12px;">\n            <p style="margin: 0;">\n              This email was sent because you have email notifications enabled for your forms.\n              <br>\n              <a href="').concat((0,o.$)(),'/settings" style="color: #3b82f6;">Manage notification settings</a>\n            </p>\n          </div>\n        </body>\n      </html>\n    ')}async sendWelcomeEmail(n,e){try{const t={to:n,subject:"Welcome to AdParlay - Start Building Your Forms!",html:this.generateWelcomeEmailHTML(e),formId:"welcome",formTitle:"Welcome Email",submissionId:"welcome-"+Date.now()},o=await fetch("".concat(this.baseUrl,"/notifications/email"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok)throw new Error("Welcome email failed: ".concat(o.statusText));console.log("Welcome email sent successfully")}catch(t){console.error("Error sending welcome email:",t)}}generateWelcomeEmailHTML(n){return'\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset="utf-8">\n          <meta name="viewport" content="width=device-width, initial-scale=1.0">\n          <title>Welcome to AdParlay</title>\n        </head>\n        <body style="font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif; line-height: 1.6; color: #374151; max-width: 600px; margin: 0 auto; padding: 20px;">\n          <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px; border-radius: 12px; margin-bottom: 30px; text-align: center;">\n            <h1 style="color: white; margin: 0; font-size: 28px; font-weight: 600;">\n              Welcome to AdParlay! \ud83c\udf89\n            </h1>\n            <p style="color: rgba(255, 255, 255, 0.9); margin: 12px 0 0 0; font-size: 18px;">\n              Hi '.concat(n,', you\'re all set to start building amazing forms!\n            </p>\n          </div>\n\n          <div style="background: white; border: 1px solid #e5e7eb; border-radius: 8px; padding: 30px; margin-bottom: 20px;">\n            <h2 style="color: #374151; margin: 0 0 20px 0; font-size: 20px; font-weight: 600;">\n              What\'s Next?\n            </h2>\n            <div style="space-y: 16px;">\n              <div style="margin-bottom: 16px;">\n                <h3 style="color: #3b82f6; margin: 0 0 8px 0; font-size: 16px; font-weight: 600;">\n                  1. Create Your First Form\n                </h3>\n                <p style="margin: 0; color: #6b7280;">\n                  Use our drag-and-drop builder to create professional forms in minutes.\n                </p>\n              </div>\n              <div style="margin-bottom: 16px;">\n                <h3 style="color: #3b82f6; margin: 0 0 8px 0; font-size: 16px; font-weight: 600;">\n                  2. Customize & Brand\n                </h3>\n                <p style="margin: 0; color: #6b7280;">\n                  Match your brand colors, fonts, and styling to create a seamless experience.\n                </p>\n              </div>\n              <div style="margin-bottom: 16px;">\n                <h3 style="color: #3b82f6; margin: 0 0 8px 0; font-size: 16px; font-weight: 600;">\n                  3. Share & Collect Leads\n                </h3>\n                <p style="margin: 0; color: #6b7280;">\n                  Get a shareable link and start collecting leads immediately.\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div style="text-align: center; margin: 30px 0;">\n            <a href="').concat((0,o.$)(),'/builder" \n               style="display: inline-block; background: #3b82f6; color: white; padding: 16px 32px; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 16px; transition: background-color 0.2s;">\n              Start Building Your First Form\n            </a>\n          </div>\n\n          <div style="background: #f0f9ff; padding: 20px; border-radius: 8px; margin-top: 30px;">\n            <h3 style="color: #1e40af; margin: 0 0 12px 0; font-size: 16px; font-weight: 600;">\n              Need Help?\n            </h3>\n            <p style="margin: 0 0 12px 0; color: #1e40af;">\n              Check out our documentation or reach out to our support team.\n            </p>\n            <a href="').concat((0,o.$)(),'/help" style="color: #3b82f6; text-decoration: none;">\n              Visit Help Center \u2192\n            </a>\n          </div>\n\n          <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e5e7eb; text-align: center; color: #9ca3af; font-size: 12px;">\n            <p style="margin: 0;">\n              You\'re receiving this email because you signed up for AdParlay.\n              <br>\n              <a href="').concat((0,o.$)(),'/settings" style="color: #3b82f6;">Manage your email preferences</a>\n            </p>\n          </div>\n        </body>\n      </html>\n    ')}}}}]);
//# sourceMappingURL=360.436279b7.chunk.js.map